import"./DE3akDVi.js";import{R as l,w as s,Z as b}from"./DSGbj4hz.js";import{d as g,F as d,L as w,A as x,b as j,B as u,I as f,s as S}from"./BlUKqefZ.js";import{g as i,b as p,E as v}from"./D8j6JjnZ.js";import"./BsPQu0W_.js";import"./CQx-Q2Z_.js";import"./CwuAAFsv.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new t.Error().stack;o&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[o]="ac33c882-8815-41ed-ae6f-9cef1bea63c5",t._sentryDebugIdIdentifier="sentry-dbid-ac33c882-8815-41ed-ae6f-9cef1bea63c5")}catch{}})();(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function a(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(e){if(e.ep)return;e.ep=!0;const r=a(e);fetch(e.href,r)}})();const M=(t="")=>{try{const o=new URL(t);return o.hostname===i.wb.hostname||o.hostname.endsWith(`.${i.wb.hostname}`)}catch{return!1}};function A(){const[t,o]=l.useState(!0),[a,c]=l.useState(!1),e=async n=>{var m,y;const[h]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0});h.id&&(await chrome.tabs.sendMessage(h.id,{source:v.PopUp,action:n}),(y=(m=chrome.extension.getViews({type:"popup"}))==null?void 0:m[0])==null||y.close())},r=async()=>{const[n]=await chrome.tabs.query({url:["https://cmp.wildberries.ru/*","https://cmp-new.wildberries.ru/*"],active:!0,lastFocusedWindow:!0});n?await e(p.WbApiTokenModalShow):await chrome.tabs.create({url:"https://cmp.wildberries.ru/campaigns/list/all?showApiTokenModal=true",active:!0})};return l.useEffect(()=>{(async()=>{const[n]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0});n.url&&(o(!M(n.url)),c(!0))})(),g.pageView("popup")},[]),s.jsx("div",{style:{width:t&&a?410:340,padding:16},children:s.jsxs(d,{type:"vertical",gap:"l",align:"center",children:[s.jsxs(d,{type:"horizontal",style:{fontSize:24},align:"flex-end",gap:"s",children:[s.jsxs(d,{type:"horizontal",align:"center",children:[s.jsx(w,{style:{fontSize:"1.5em"}}),s.jsx(x,{})]}),s.jsxs("span",{style:{opacity:.6,fontSize:12,lineHeight:"28px",fontWeight:700},children:["v",i.release]})]}),t&&a&&s.jsx(j,{title:`Работает только на сайтах ${i.wb.name}`,message:s.jsxs(s.Fragment,{children:["Перейдите на ",i.wb.name,", чтобы воспользоваться функционалом плагина"]})}),s.jsx(u,{onClick:()=>e(p.WbWarehouseAnalyzeModalShow),prefix:s.jsx(f.WarehouseCart,{}),disabled:t,children:"Анализ работы складов"}),s.jsx(u,{onClick:()=>e(p.WbMinusPhraseModalShow),prefix:s.jsx(f.Cloud,{}),disabled:t,children:"Подбор ключевых фраз"}),s.jsx(u,{onClick:r,prefix:s.jsx(f.ConnectorOff,{}),disabled:t,children:"Добавить / изменить API ключ"}),i.isDev]})})}function I(){const t=document.querySelector("#__root");if(!t)throw new Error("Can't find Popup root element");t.className=S.root,b(t).render(s.jsx(A,{}))}I();
//# sourceMappingURL=CNeYbmS9.js.map
