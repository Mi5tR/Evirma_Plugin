var at=Object.defineProperty;var nt=(t,e,s)=>e in t?at(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var f=(t,e,s)=>nt(t,typeof e!="symbol"?e+"":e,s);import"./DE3akDVi.js";import{h as ot,C as ct,R as z,i as it,j as ut,g as dt,A as x,a as D}from"./D8j6JjnZ.js";import{o as ht}from"./BsPQu0W_.js";import{_ as lt}from"./DSGbj4hz.js";import{r as W}from"./DztEdZpe.js";import"./CzfjByzk.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="50d3233f-880e-49de-8503-6c5b74f8616a",t._sentryDebugIdIdentifier="sentry-dbid-50d3233f-880e-49de-8503-6c5b74f8616a")}catch{}})();const pt=[],j=t=>{const e=lt(t.url,{decode:decodeURIComponent,end:!0});return s=>{const r=a=>{const n=a.request.url.toLowerCase().split("?")[0],o=`${t.basePath}`.toLowerCase(),i=n.replace(o,""),c=e(i);return a.request.method.toLowerCase()===t.method.toLowerCase()&&c?(a.params=c.params,s(a),!0):!1};for(const a of pt)if(r(a))break;return W.on(r),()=>W.removeListener(r)}};class C extends Error{constructor(e,s){super(e,s),this.name="HandlerError",Object.setPrototypeOf(this,C.prototype)}}const ft=/^\+(\d+)([smhd])$/i;function mt(t){const e=t.match(ft);if(!e)throw new Error("Wrong expiredAt format");const s=new Date,r=parseFloat(e[1]);switch(e[2]){case"s":s.setSeconds(s.getSeconds()+r);break;case"m":s.setMinutes(s.getMinutes()+r);break;case"h":s.setHours(s.getHours()+r);break;case"d":s.setDate(s.getDate()+r);break}return s}const wt=t=>Object.keys(t.params).sort((e,s)=>s.localeCompare(e)).reduce((e,s)=>{const r=t.params[s];return r!==void 0?e.replace(`:${s}`,r.toString()):e},t.path),k=(t,e)=>({path:t,params:e});function F({method:t,url:e,data:s}){return`${t}_${e}_${JSON.stringify(s)}`}async function L(t){const{url:e,basePath:s=window.location.origin,headers:r,adapter:a,method:n="GET",params:o,data:i,cache:c,...d}=t,l=typeof e=="string"?e:wt(e),p=`${s}${l}`;if(!l.startsWith("/"))throw new Error("URL path should be start with slash [/]");const h=new URL(p);if(typeof o!="string")for(const u in o)h.searchParams.set(u,o[u]);let m;if(c!=null&&c.expiredAt){let u;switch(typeof c.cacheKey){case"function":u=F(c.cacheKey({method:n,url:new URL(h),data:i}));break;case"string":u=c.cacheKey;break;default:u=F({method:n,url:new URL(h),data:i})}let S;switch(typeof c.expiredAt){case"function":S=c.expiredAt(new Date);break;case"string":S=mt(c.expiredAt);break}m={cacheKey:u,expiredAt:S}}let g;try{g=await a({url:h,headers:r,urlRaw:e,basePath:s,referrer:window.location.toString(),method:n,data:i,cache:m,...d})}catch(u){throw u instanceof ot?u:u instanceof ct?new z(u):new it(u)}if(!g.ok)throw new ut(g);return g}const b="request-cache";let I;async function V(){return I||(I=await ht(dt.appName,1,{upgrade(t){const e=t.createObjectStore(b,{keyPath:"id",autoIncrement:!0});e.createIndex("request","request"),e.createIndex("expiredAt","expiredAt")}})),I}async function ne(){const t=await V(),e=await t.getAllKeysFromIndex(b,"expiredAt",IDBKeyRange.upperBound(new Date));await Promise.all(e.map(s=>t.delete(b,s))),console.log(`Cache keys invalidated: ${e.length}`)}async function yt(t,e){const s=await V(),{cache:r,responseType:a,...n}=t;if(!r)return e({responseType:a,...n});const o=await s.getFromIndex(b,"request",r.cacheKey);if(o&&o.expiredAt>new Date)return o.result;const i=await e({responseType:a,...n});return[200,429].includes(i.status)?await s.add(b,{request:r.cacheKey,expiredAt:new Date(r.expiredAt),result:i}):o&&await s.delete(b,r.cacheKey),i}function gt(t){let e=1,s=0,r,a;if(t)for(e=0,r=t.length-1;r>=0;r--)a=t.charCodeAt(r),e=(e<<6&268435455)+a+(a<<14),s=e&266338304,e=s!==0?e^s>>21:e;return String(e)}function oe(t){return t!==void 0}function bt(t){return{uuid:gt(t.toString()),fn:t}}function T(t){return Object.fromEntries(Object.entries(t).map(([e,s])=>[e,bt(s)]))}class w extends Error{constructor(s,r,a,n){var o;super();f(this,"status");f(this,"service");f(this,"data",{});f(this,"raw");this.name="HttpError",this.status=r,this.service=s,this.raw=n,this.data=a,this.data.message&&(this.message=(o=this.data.message)==null?void 0:o.substring(0,500)),Object.setPrototypeOf(this,w.prototype)}}class N extends w{constructor(...e){super(...e),this.name="AccessDeniedError",this.message=this.message||"В доступе отказано",Object.setPrototypeOf(this,N.prototype)}}class U extends Error{constructor(s,r,a){super();f(this,"service");f(this,"raw");this.name="NetworkError",this.message="Ошибка соединения",this.cause=s,this.service=r,this.raw=a,Object.setPrototypeOf(this,U.prototype)}}class O extends w{constructor(...e){super(...e),this.name="ServiceError",this.message=this.message||"ServiceError",Object.setPrototypeOf(this,O.prototype)}}class B extends w{constructor(...e){super(...e),this.name="UnauthorizedError",this.message=this.message||"Необходима авторизация",Object.setPrototypeOf(this,B.prototype)}}class K extends O{constructor(...e){super(...e),this.name="ValidationError",this.message=this.message||"Ошибка валидации",Object.setPrototypeOf(this,K.prototype)}}class A extends Error{constructor(s,r){super();f(this,"service");f(this,"fieldName");this.name="AuthenticateRequireError",this.message=`Необходимо поле авторизации ${r}`,this.fieldName=r,this.service=s,Object.setPrototypeOf(this,A.prototype)}}class G extends w{constructor(...e){super(...e),this.name="TooManyRequestsError",this.message=this.message||"Вы сделали слишком много запросов за короткое время. Пожалуйста, немного подождите — скоро всё снова будет работать!",Object.setPrototypeOf(this,G.prototype)}}class H extends w{constructor(...e){super(...e),this.name="NotFoundError",this.message=this.message||"Данных не найдено. Проверьте параметры или попробуйте позже.",Object.setPrototypeOf(this,H.prototype)}}function Tt(t){return typeof t=="object"&&t!==null&&"error"in t&&typeof t.error=="string"}function kt(t){return typeof t=="object"&&t!==null&&"detail"in t&&typeof t.detail=="string"}function At(t){return typeof t=="object"&&t!==null&&"errorText"in t&&typeof t.errorText=="string"}const Pt=[t=>t.startsWith("Превышено допустимое количество запросов"),t=>t.startsWith("Limited by global limiter")];function M(t,e,s){if(t instanceof A||t instanceof z)return t;const r={request:s,response:t},a=t==null?void 0:t.status,n={message:"unknown"};if(typeof(t==null?void 0:t.data)=="string"&&(n.message=t==null?void 0:t.data),typeof t.data=="object"&&t.data){const o=t.data;Tt(o)&&(n.message=o.error),kt(o)&&(n.message=o.detail),At(o)&&(n.message=o.errorText,n.additional=Array.isArray(o.additionalErrors)?o.additionalErrors:void 0)}return a===401?new B(e,a,n,r):a===403?new N(e,a,n,r):a===404?new H(e,a,n,r):a===422?new K(e,a,n,r):a===429&&Pt.find(o=>n.message&&o(n.message))?new G(e,a,n,r):a&&a>=400?new O(e,a,n,r):new U(t,e,{request:s})}const J="https://cmp.wildberries.ru/api";function Z(t){return j({basePath:J,...t})}function P(t){switch(t){case x.Auto:return"auto";case x.SearchCatalog:return"seacat";case x.Search:return"search";case x.Catalog:return"catalog";default:throw new C("unknown advertID type")}}const q={},ce=t=>{q.accessToken=t},vt=()=>{if(q.accessToken)return q.accessToken;throw new A("wb","accessToken")};async function y(t){const{withAccessToken:e,...s}=t,r=new Headers(s.headers);e&&r.set("Authorizev3",vt());try{const{data:a}=await L({rate:{limit:4,interval:1e3},responseType:"json",...s,basePath:J,headers:r,adapter:n=>yt(n,D)});return a}catch(a){throw M(a,"wb",t)}}const v="/v2";function Et(t,e){return y({method:"GET",url:k(`${v}/:type/:id/stat-words`,{type:P(t),id:e}),withAccessToken:!0})}function $t(t,e,s){return y({method:"GET",url:k(`${v}/:type/:id/set-plus`,{type:P(t),id:e}),params:{fixed:s?"true":"false"},rate:{limit:1,interval:2e3},withAccessToken:!0})}const xt=Z({method:"GET",url:"/v2/:type/:id/set-plus"});function Ot(t,e){return y({method:"GET",url:k(`${v}/:type/:id/budget`,{type:P(t),id:e}),rate:{limit:1,interval:2e3},withAccessToken:!0})}function St(t,e){return y({method:"GET",url:k(`${v}/:type/:id/placement`,{type:P(t),id:e}),rate:{limit:1,interval:2e3},withAccessToken:!0})}function It(t,e,s){return y({method:"POST",url:k(`${v}/:type/:id/set-excluded`,{type:P(t),id:e}),data:{excluded:s},rate:{limit:1,interval:2e3},withAccessToken:!0})}const ie={enablePlus:$t,getStatWords:Et,getBudget:Ot,getPlacement:St,setExcluded:It,enablePlusInterceptor:xt},Q="/v5/supplier";function qt(t){return y({method:"GET",url:`${Q}`,withAccessToken:!0,background:!1,cache:{cacheKey:e=>({...e,data:{supplierUuid:t}}),expiredAt:"+10m"}})}function Rt(){return y({method:"GET",url:"/v5/suppliers",withAccessToken:!0,background:!1})}const Dt=Z({method:"GET",url:`${Q}`}),ue={getInfo:qt,getInfoInterceptor:Dt,getSuppliers:Rt};function jt(t){var e,s;return(e=t.data)!=null&&e.products?{...t,data:{...t.data,products:(s=t.data)==null?void 0:s.products.map(({id:r,log:a,logs:n,time1:o,time2:i,wh:c,promoTextCat:d,brand:l,brandId:p,name:h,isNew:m})=>({id:r,log:a,logs:n,time1:o,time2:i,wh:c,promoTextCat:d,brand:l,brandId:p,name:h,isNew:m}))}}:t}const de=T({search:jt});function Ct(t){var e,s;return(e=t.data)!=null&&e.products?{...t,data:{...t.data,products:(s=t.data)==null?void 0:s.products.map(({id:r,log:a,logs:n,time1:o,time2:i,wh:c,promoTextCat:d,brand:l,brandId:p,name:h})=>({id:r,log:a,logs:n,time1:o,time2:i,wh:c,promoTextCat:d,brand:l,brandId:p,name:h}))}}:t}const he=T({search:Ct});function Lt(t){var e,s;return(e=t.data)!=null&&e.products?{...t,data:{...t.data,products:(s=t.data)==null?void 0:s.products.map(({id:r,log:a,logs:n,promoTextCat:o})=>({id:r,log:a,logs:n,promoTextCat:o}))}}:t}const le=T({search:Lt});function Nt(t){var e,s;return(e=t.data)!=null&&e.products?{...t,data:{...t.data,products:(s=t.data)==null?void 0:s.products.map(({id:r,name:a,brand:n,brandId:o})=>({id:r,name:a,brand:n,brandId:o}))}}:t}const pe=T({search:Nt}),X="https://seller-content.wildberries.ru",Y="/ns/analytics-api/content-analytics/api",R={},fe=t=>{R.accessToken=t},_=()=>{if(R.accessToken)return R.accessToken;throw new A("wb","accessToken")};async function E(t){const{withAccessToken:e,...s}=t,r=new Headers(s.headers);e&&r.set("Authorizev3",_());try{const{data:a}=await L({rate:{limit:4,interval:1e3},responseType:"json",...s,basePath:X,headers:r,adapter:n=>D({...n,credentials:"include"})});return a}catch(a){throw M(a,"wb",s)}}function tt(t){return j({basePath:X,...t})}const $=Y+"/v1/sales-funnel";function Ut(t){const{start:e,end:s,subjectId:r,skipDeletedNm:a=!1}=t;return E({method:"POST",url:`${$}/seller/comparisons/market`,data:{subjectID:r,start:e,end:s,skipDeletedNm:a},rate:{limit:1,interval:1e3},withAccessToken:!0})}function Bt({subjectId:t}){return E({method:"GET",url:`${$}/seasonality`,params:{subjectID:t},rate:{limit:1,interval:1e3},withAccessToken:!0})}function Kt(t){const{nms:e,skipDeletedNm:s=!1,brands:r=[],tagIds:a=[],subjects:n=[],currentPeriod:o,prevPeriod:i,orderBy:c}=t;return E({method:"POST",url:`${$}/report`,data:{nms:e,skipDeletedNm:s,brands:r,tagIds:a,subjects:n,currentPeriod:o,prevPeriod:i,orderBy:c},rate:{limit:1,interval:1e3},withAccessToken:!0})}function Gt(t){const{nms:e,skipDeletedNm:s=!1,brands:r=[],tagIds:a=[],subjects:n=[],currentPeriod:o,orderBy:i={field:"orders",mode:"desc"},limit:c,offset:d}=t;return E({method:"POST",url:`${$}/report/details`,data:{nms:e,skipDeletedNm:s,brands:r,tagIds:a,subjects:n,currentPeriod:o,orderBy:i,limit:c,offset:d},rate:{limit:1,interval:1e3},withAccessToken:!0})}const Ht=tt({method:"POST",url:`${$}/report`}),me={comparisons:Ut,seasonality:Bt,report:Kt,reportDetails:Gt,reportInterceptor:Ht},et=Y+"/v1/customer-profile";async function Mt(t){return E({method:"POST",url:`${et}/entry-points`,data:{nms:[],tagIds:[],brands:[],subjects:[],...t},withAccessToken:!0})}const Wt=tt({method:"POST",url:`${et}/entry-points`}),we={list:Mt,listInterceptor:Wt};function Ft(t){var e,s;return(e=t.data)!=null&&e.products?{...t,data:{...t.data,products:(s=t.data)==null?void 0:s.products.map(({id:r,brand:a,name:n,time1:o,time2:i,sizes:c,wh:d,subjectId:l,totalQuantity:p,colors:h,feedbacks:m,reviewRating:g,promoTextCat:u})=>({id:r,brand:a,name:n,time1:o,time2:i,sizes:c,wh:d,subjectId:l,totalQuantity:p,colors:h,feedbacks:m,reviewRating:g,promoTextCat:u}))}}:t}const ye=T({search:Ft});function zt(t){return t.products?{products:t.products.map(({id:e,brand:s,name:r,time1:a,time2:n,sizes:o,wh:i,subjectId:c,totalQuantity:d,colors:l,feedbacks:p,reviewRating:h,panelPromoId:m})=>({id:e,brand:s,name:r,time1:a,time2:n,sizes:o,wh:i,subjectId:c,totalQuantity:d,colors:l,feedbacks:p,reviewRating:h,panelPromoId:m}))}:t}const ge=T({search:zt}),Vt="https://seller.wildberries.ru/ns";async function Jt(t){const{withAccessToken:e,...s}=t,r=new Headers(s.headers);e&&r.set("Authorizev3",_());try{const{data:a}=await L({rate:{limit:4,interval:1e3},responseType:"json",...s,basePath:Vt,headers:r,adapter:n=>D({...n,credentials:"include"})});return a}catch(a){throw M(a,"wb",t)}}function Zt(t){return j({basePath:"/ns",...t})}const st="/orders/suppliers-home-page/v1/orders/getStat",rt={id:"json-rpc_53",jsonrpc:"2.0",params:{days:7,timeZone:3}};async function Qt(){return Jt({method:"POST",url:st,data:rt,rate:{limit:1,interval:1e3},credentials:"include",withAccessToken:!0})}const Xt=Zt({method:"POST",url:st}),be={getStats:Qt,getStatsInterceptor:Xt,getStatsPayload:rt};export{A,ne as B,w as H,U as N,y as R,O as S,G as T,K as V,M as a,he as b,le as c,pe as d,E as e,Y as f,ye as g,ge as h,Jt as i,vt as j,_ as k,oe as l,ie as m,H as n,ue as o,me as p,N as q,L as r,ce as s,fe as t,k as u,de as v,C as w,be as x,we as y,yt as z};
//# sourceMappingURL=DetAIFwH.js.map
